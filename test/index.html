<!DOCTYPE html>
<html lang="en">
<head>

<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">

<script src="js/jquery-1.12.4.js"></script>
 <script src="js/three.min.js"></script>
<script src="js/ColladaLoader.js"></script>
<script src="js/OrbitControls.js"></script>
<script src="js/EventsControls.js"></script>


<link rel="stylesheet" href="css/style.css">

<!--
 * Development : www.utilewebsites.nl
 * Example : Three.js Raycaster works with mouse and touch (ipad)
 -->

</head>

<body>

</body>


<script>


var container, controls, camera, scene, renderer;
var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;
var clock = new THREE.Clock();

init();
animate();

function init() {

	//////////////////////////////////////
	// setup render system
	//////////////////////////////////////

	renderer = new THREE.WebGLRenderer( { antialias: true } );
	renderer.setPixelRatio( window.devicePixelRatio );
	renderer.outputEncoding = THREE.sRGBEncoding;
	renderer.setSize(window.innerWidth, window.innerHeight);
	renderer.setClearColor (0xdddddd, 1);
	container = document.createElement( 'div' );
	document.body.appendChild( container );


	// create scene and camera
	scene = new THREE.Scene();
	camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.01, 100);
	camera.position.set(-0.5, 0.6, -1.5);

	   // create a camera control
    initCamControls();


	// resize handler/listener
  	window.addEventListener('resize', onWindowResize, false);

	var pointLight01 = new THREE.PointLight( 0xffffff, 0.08 );
	scene.add(pointLight01)
	pointLight01.position.set( -2,3.8,5 );


	var pointLight02 = new THREE.PointLight( 0xffffff, 0.08 );
	scene.add(pointLight02)
	pointLight02.position.set( 0,3.8,5 );


	var pointLight03 = new THREE.PointLight( 0xffffff, 0.08 );
	scene.add(pointLight03)
	pointLight03.position.set( 2,3.8,5 );

	var ambiLight01 = new THREE.AmbientLight( 0xcccccc, .76);
	scene.add(ambiLight01)


var size = 2; var divisions = 20; var gridHelper = new THREE.GridHelper( size, divisions ); scene.add( gridHelper );

EventsControls1 = new EventsControls( camera, renderer.domElement );
	//EventsControls1.map = checkerboard;
	//EventsControls1.offsetUse = true;

	EventsControls1.attachEvent( 'onclick', function() {

		console.log( 'this.focused.name: ' + this.focused.name );
		alert(this.focused.name)

	});

	// add to page
	container.appendChild(renderer.domElement);


}
//////////////////////////////////////
// loader
//////////////////////////////////////

function loader(model){
		var loader = new THREE.ColladaLoader();
		var files = 'model/'+model+'.dae';
		var loader = new THREE.ColladaLoader();
				loader.load( files, function ( collada ) {

					//console.log('load object :'+files);

					object3d = collada.scene;
					object3d.name = "https://www.w3schools.com";
					object3d.scale.set(0.004,0.004,0.004);
					object3d.rotateX(0);
					object3d.rotateY(0);
					object3d.rotateZ(180);
					object3d.position.set(0, 0,0 );
					EventsControls1.attach(object3d);
					scene.add(object3d);



				});

}

// load objects
loader("kast")



//////////////////////////////////////
//  handlers
//////////////////////////////////////

function onWindowResize() {
  windowHalfX = window.innerWidth / 2;
  windowHalfY = window.innerHeight / 2;
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize( window.innerWidth, window.innerHeight );
}


function initCamControls() {
    controls = new THREE.OrbitControls(camera, renderer.domElement);
    //controls.screenSpacePanning = true;
    controls.enableDamping = true;
controls.dampingFactor = 0.25;
    controls.minDistance = .02;
    controls.maxDistance = 5;

    //controls.target.set( 0,1, 0 );
  controls.target = new THREE.Vector3(0, 0.5, 0);

  //


}


//////////////////////////////////////
//  animation and render loop
//////////////////////////////////////

function animate() {
  requestAnimationFrame(animate);
  var  delta = clock.getDelta();
  controls.update(delta);
  //pivot.rotation.z += 0.01;

  render();
}

function render() {
	renderer.render( scene, camera );
}


</script>
</html>
